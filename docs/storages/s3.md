# S3 Storage (MVP)

This document describes the minimal S3 support in Floe (F-103).

## Requirements

Floe uses the standard AWS credential/provider chain. Configure access using
the usual environment variables, for example:

- `AWS_ACCESS_KEY_ID`
- `AWS_SECRET_ACCESS_KEY`
- `AWS_SESSION_TOKEN` (if using temporary credentials)
- `AWS_REGION` or `AWS_DEFAULT_REGION`

## Config example

```yaml
storages:
  default: local
  definitions:
    - name: local
      type: local
    - name: s3_raw
      type: s3
      bucket: my-bucket
      region: eu-west-1
      prefix: raw/data

entities:
  - name: customers
    source:
      format: csv
      path: inbound/customers
      storage: s3_raw
    sink:
      accepted:
        format: parquet
        path: outbound/customers
        storage: s3_raw
      rejected:
        format: csv
        path: outbound/customers_rejected
        storage: s3_raw
    policy:
      severity: reject
    schema:
      columns:
        - name: customer_id
          type: string
```

Resolved S3 URIs are formed as:

```
s3://<bucket>/<prefix>/<path>
```

## MVP limitations

- Source supports CSV only.
- Source path is treated as a prefix (no S3 glob patterns).
- Only suffix filtering by format is applied (for CSV, `.csv`).
- Recursive listing behavior is not configurable yet (S3 prefix lists are
  effectively recursive).
- S3 archive targets are not supported in this MVP.
